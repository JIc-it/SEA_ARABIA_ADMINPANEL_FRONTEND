import { Button } from "@mui/material";
import customerImg from "../../assets/images/customerimg.png";
import { useTheme } from "@mui/material/styles";
import useMediaQuery from "@mui/material/useMediaQuery";
import { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";
import ChangePasword from "./ChangePassword";
import CircularProgress from "@mui/material/CircularProgress";

function ProfileCardDetails({ data,isLoading }) {
    const theme = useTheme();
    const navigate = useNavigate();
    const [open,setOpen]=useState(false)
    const isMobileView = useMediaQuery(theme.breakpoints.down("sm"));
    const [active, setActive] = useState("Details");

    const [customerDetails, setCustomerDetails] = useState([]);

    return (
        <>
        {isLoading ?
            <div style={{ display: "flex", justifyContent: "center", alignItems: "center", height: "80vh" }}>
                <CircularProgress />
            </div>
        
        :
        <div
            className={
                isMobileView ? "d-flex flex-column" : "d-flex justify-content-between"
            }
        >
            <div className={isMobileView ? "col-12 my-2" : "col-5 my-2"}>
                <div
                    className="card personal_details"
                    style={{ height: "fit-content" }}
                >
                    <div className="card-body">
                        <div className="left_header py-2">
                            <div>
                                <p className="card_content">{data?.first_name}</p>
                            </div>

                            <div className="card_header_contents">
                                <p className="card_content">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="21"
                                        height="20"
                                        viewBox="0 0 21 20"
                                        fill="none"
                                    >
                                        <path
                                            d="M12.2436 8.9577L11.6186 11.041H8.75701L9.38201 8.9577H12.2436Z"
                                            fill="white"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M3.38738 2.8864C2.16699 4.10679 2.16699 6.07098 2.16699 9.99935C2.16699 13.9277 2.16699 15.8919 3.38738 17.1123C4.60777 18.3327 6.57195 18.3327 10.5003 18.3327C14.4287 18.3327 16.3929 18.3327 17.6133 17.1123C18.8337 15.8919 18.8337 13.9277 18.8337 9.99935C18.8337 6.07098 18.8337 4.10679 17.6133 2.8864C16.3929 1.66602 14.4287 1.66602 10.5003 1.66602C6.57195 1.66602 4.60777 1.66602 3.38738 2.8864ZM9.84659 5.23405C10.1772 5.33324 10.3648 5.68167 10.2656 6.01229L9.75701 7.70769H12.6186L13.235 5.6531C13.3342 5.32248 13.6826 5.13487 14.0133 5.23405C14.3439 5.33324 14.5315 5.68167 14.4323 6.01229L13.9237 7.70769H15.5003C15.8455 7.70769 16.1253 7.98752 16.1253 8.33269C16.1253 8.67787 15.8455 8.9577 15.5003 8.9577H13.5487L12.9237 11.041H14.667C15.0122 11.041 15.292 11.3209 15.292 11.666C15.292 12.0112 15.0122 12.291 14.667 12.291H12.5487L11.9323 14.3456C11.8331 14.6762 11.4847 14.8639 11.1541 14.7647C10.8234 14.6655 10.6358 14.3171 10.735 13.9864L11.2436 12.291H8.38201L7.76563 14.3456C7.66645 14.6762 7.31802 14.8639 6.9874 14.7647C6.65678 14.6655 6.46916 14.3171 6.56835 13.9864L7.07697 12.291H5.50033C5.15515 12.291 4.87533 12.0112 4.87533 11.666C4.87533 11.3209 5.15515 11.041 5.50033 11.041H7.45197L8.07697 8.9577H6.33366C5.98848 8.9577 5.70866 8.67787 5.70866 8.33269C5.70866 7.98752 5.98848 7.70769 6.33366 7.70769H8.45197L9.06835 5.6531C9.16754 5.32248 9.51596 5.13487 9.84659 5.23405Z"
                                            fill="white"
                                        />
                                    </svg>{" "}
                                    &nbsp; {data?.account_id}
                                </p>
                                <p className="card_content">| &nbsp;</p>
                                <p className="card_content">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="21"
                                        height="20"
                                        viewBox="0 0 21 20"
                                        fill="none"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M18.8337 9.99935C18.8337 14.6017 15.1027 18.3327 10.5003 18.3327C5.89795 18.3327 2.16699 14.6017 2.16699 9.99935C2.16699 5.39698 5.89795 1.66602 10.5003 1.66602C15.1027 1.66602 18.8337 5.39698 18.8337 9.99935ZM13.0003 7.49935C13.0003 8.88006 11.881 9.99935 10.5003 9.99935C9.11961 9.99935 8.00033 8.88006 8.00033 7.49935C8.00033 6.11864 9.11961 4.99935 10.5003 4.99935C11.881 4.99935 13.0003 6.11864 13.0003 7.49935ZM10.5003 17.0827C11.987 17.0827 13.3667 16.6247 14.5061 15.842C15.0093 15.4963 15.2244 14.8379 14.9318 14.302C14.3253 13.1912 13.0755 12.4993 10.5003 12.4993C7.92507 12.4993 6.6753 13.1912 6.06878 14.302C5.7762 14.8378 5.99124 15.4963 6.49446 15.842C7.63381 16.6246 9.01357 17.0827 10.5003 17.0827Z"
                                            fill="white"
                                        />
                                    </svg>{" "}
                                    &nbsp; {data?.role}
                                </p>
                            </div>
                        </div>

                        <div className="card_personal_details">
                            <h5 className="personal_details_header">Details</h5>
                            <div className="col-12">
                                <div className="vendor_info">
                                    <p className="heading_name">Phone</p>
                                    <p>{data?.mobile}</p>
                                </div>
                                <div className="vendor_info">
                                    <p className="heading_name">Email</p>
                                    <p>{data?.email}</p>
                                </div>
                            </div>
                        </div>

                        <div className="bottom_button mt-3">
                            <a
                                className="call_vendor_button btn "
                                onClick={() => {
                                    // navigate(`/booking`);
                                    // navigate(`/booking-view/1234`);
                                }}
                            >
                                Permissions &nbsp;
                                <svg
                                className="arrows"
                                    width={20}
                                    height={20}
                                    viewBox="0 0 20 20"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M3.3335 10H16.6668M16.6668 10L11.6668 5M16.6668 10L11.6668 15"
                                        stroke="white"
                                        strokeWidth="1.5"
                                        strokeLinecap="round"
                                        strokeLinejoin="round"
                                    />
                                </svg>
                            </a>
                            <a
                                className="mail_vendor_button btn btn-outline"
                                onClick={() => {
                                    navigate(
                                        `/customer-activity-log/${customerDetails?.id}/${customerDetails?.first_name}`
                                    );
                                }}
                            >
                                Activity Log &nbsp;
                                <svg
                                    width={20}
                                    height={20}
                                    viewBox="0 0 20 20"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <g clipPath="url(#clip0_2988_8977)">
                                        <path
                                            d="M9.05761 17.9252L9.91816 18.4345V18.4345L9.05761 17.9252ZM9.2738 17.5599L8.41325 17.0506L8.41325 17.0506L9.2738 17.5599ZM7.39251 17.5599L8.25307 17.0506L8.25306 17.0506L7.39251 17.5599ZM7.60871 17.9252L6.74815 18.4345L6.74815 18.4345L7.60871 17.9252ZM1.92024 14.2757L2.84412 13.893V13.893L1.92024 14.2757ZM5.24092 16.3208L5.27289 15.3213H5.27289L5.24092 16.3208ZM3.72423 16.0796L3.34154 17.0035H3.34154L3.72423 16.0796ZM14.7461 14.2757L15.67 14.6583L15.67 14.6583L14.7461 14.2757ZM11.4254 16.3208L11.3934 15.3213L11.4254 16.3208ZM12.9421 16.0796L13.3248 17.0035L12.9421 16.0796ZM13.4082 5.4912L13.9307 4.63856V4.63856L13.4082 5.4912ZM14.5086 6.59168L15.3613 6.06918L15.3613 6.06918L14.5086 6.59168ZM3.25818 5.4912L2.73567 4.63856H2.73567L3.25818 5.4912ZM2.1577 6.59168L1.30506 6.06918L1.30506 6.06918L2.1577 6.59168ZM6.59682 16.5186L6.08769 17.3793L6.08769 17.3793L6.59682 16.5186ZM9.91816 18.4345L10.1344 18.0693L8.41325 17.0506L8.19705 17.4158L9.91816 18.4345ZM6.53196 18.0693L6.74815 18.4345L8.46926 17.4158L8.25307 17.0506L6.53196 18.0693ZM8.19705 17.4158C8.23314 17.3548 8.29646 17.3333 8.33316 17.3333C8.36986 17.3333 8.43317 17.3548 8.46926 17.4158L6.74815 18.4345C7.45748 19.6329 9.20884 19.6329 9.91816 18.4345L8.19705 17.4158ZM7.33317 6H9.33317V4H7.33317V6ZM13.9998 10.6667V11.3334H15.9998V10.6667H13.9998ZM2.6665 11.3334V10.6667H0.666504V11.3334H2.6665ZM0.666504 11.3334C0.666504 12.0963 0.665962 12.7185 0.70054 13.2253C0.735731 13.7411 0.810608 14.2099 0.996359 14.6583L2.84412 13.893C2.77613 13.7288 2.72414 13.5031 2.6959 13.0891C2.66705 12.6662 2.6665 12.1236 2.6665 11.3334H0.666504ZM5.27289 15.3213C4.62158 15.3005 4.31973 15.2439 4.10691 15.1558L3.34154 17.0035C3.9046 17.2368 4.51015 17.298 5.20896 17.3203L5.27289 15.3213ZM0.996359 14.6583C1.43617 15.7201 2.27975 16.5637 3.34154 17.0035L4.10691 15.1558C3.53518 14.9189 3.08094 14.4647 2.84412 13.893L0.996359 14.6583ZM13.9998 11.3334C13.9998 12.1236 13.9993 12.6662 13.9704 13.0891C13.9422 13.5031 13.8902 13.7288 13.8222 13.893L15.67 14.6583C15.8557 14.2099 15.9306 13.7411 15.9658 13.2253C16.0004 12.7185 15.9998 12.0963 15.9998 11.3334H13.9998ZM11.4574 17.3203C12.1562 17.298 12.7617 17.2368 13.3248 17.0035L12.5594 15.1558C12.3466 15.2439 12.0448 15.3005 11.3934 15.3213L11.4574 17.3203ZM13.8222 13.893C13.5854 14.4647 13.1312 14.9189 12.5594 15.1558L13.3248 17.0035C14.3866 16.5637 15.2302 15.7201 15.67 14.6583L13.8222 13.893ZM9.33317 6C10.4437 6 11.2063 6.00106 11.7938 6.05691C12.3664 6.11135 12.6684 6.21071 12.8857 6.34384L13.9307 4.63856C13.3464 4.28049 12.7021 4.13425 11.9831 4.06589C11.279 3.99894 10.405 4 9.33317 4V6ZM15.9998 10.6667C15.9998 9.59491 16.0009 8.72084 15.9339 8.01676C15.8656 7.29779 15.7193 6.6535 15.3613 6.06918L13.656 7.11417C13.7891 7.33143 13.8885 7.63349 13.9429 8.20606C13.9988 8.79352 13.9998 9.55618 13.9998 10.6667H15.9998ZM12.8857 6.34384C13.1996 6.53624 13.4636 6.80021 13.656 7.11418L15.3613 6.06918C15.004 5.48611 14.5137 4.99587 13.9307 4.63856L12.8857 6.34384ZM7.33317 4C6.26139 4 5.38733 3.99894 4.68325 4.06589C3.96428 4.13425 3.31999 4.28049 2.73567 4.63856L3.78068 6.34384C3.99793 6.21071 4.29999 6.11135 4.87256 6.05691C5.46001 6.00106 6.22266 6 7.33317 6V4ZM2.6665 10.6667C2.6665 9.55618 2.66756 8.79352 2.72341 8.20606C2.77785 7.63349 2.87721 7.33143 3.01034 7.11418L1.30506 6.06918C0.946996 6.6535 0.800753 7.29779 0.732394 8.01676C0.665449 8.72084 0.666504 9.59491 0.666504 10.6667H2.6665ZM2.73567 4.63856C2.1526 4.99587 1.66237 5.48611 1.30506 6.06918L3.01034 7.11418C3.20274 6.80021 3.46671 6.53624 3.78068 6.34384L2.73567 4.63856ZM8.25306 17.0506C8.08927 16.7738 7.93239 16.5068 7.77732 16.2933C7.61037 16.0634 7.40322 15.8338 7.10594 15.6579L6.08769 17.3793C6.06638 17.3667 6.08384 17.365 6.15913 17.4686C6.24629 17.5886 6.34927 17.7606 6.53196 18.0693L8.25306 17.0506ZM5.20896 17.3203C5.5869 17.3324 5.80457 17.3403 5.96428 17.3598C6.10825 17.3773 6.11518 17.3956 6.08769 17.3793L7.10594 15.6579C6.80249 15.4784 6.49144 15.4093 6.20644 15.3745C5.93719 15.3417 5.6149 15.3323 5.27289 15.3213L5.20896 17.3203ZM10.1344 18.0693C10.317 17.7606 10.42 17.5886 10.5072 17.4686C10.5825 17.365 10.5999 17.3667 10.5786 17.3793L9.56038 15.6579C9.26309 15.8338 9.05595 16.0634 8.889 16.2933C8.73392 16.5068 8.57704 16.7738 8.41325 17.0506L10.1344 18.0693ZM11.3934 15.3213C11.0514 15.3323 10.7291 15.3417 10.4599 15.3745C10.1749 15.4093 9.86383 15.4784 9.56038 15.6579L10.5786 17.3793C10.5511 17.3956 10.5581 17.3773 10.702 17.3598C10.8617 17.3403 11.0794 17.3324 11.4574 17.3203L11.3934 15.3213Z"
                                            fill="#252525"
                                        />
                                        <path
                                            d="M18.0952 10.3629L19.0191 10.7456L19.0191 10.7456L18.0952 10.3629ZM16.404 12.0542L16.7867 12.978L16.7867 12.978L16.404 12.0542ZM16.8409 2.12749L16.3184 2.98013L16.8409 2.12749ZM17.8726 3.15919L18.7253 2.63669V2.63669L17.8726 3.15919ZM7.32532 2.12749L6.80282 1.27485L6.80282 1.27485L7.32532 2.12749ZM6.29363 3.15919L5.44098 2.63669V2.63669L6.29363 3.15919ZM11.1456 2.66699H13.0206V0.666992H11.1456V2.66699ZM17.3331 6.97951V7.60452H19.3331V6.97951H17.3331ZM17.3331 7.60452C17.3331 8.34624 17.3326 8.85244 17.3057 9.24631C17.2794 9.6312 17.2314 9.83525 17.1714 9.98023L19.0191 10.7456C19.1969 10.3163 19.2679 9.86917 19.3011 9.38246C19.3337 8.90472 19.3331 8.31887 19.3331 7.60452H17.3331ZM17.1714 9.98023C16.9557 10.5009 16.542 10.9146 16.0213 11.1303L16.7867 12.978C17.7974 12.5594 18.6005 11.7563 19.0191 10.7456L17.1714 9.98023ZM13.0206 2.66699C14.0629 2.66699 14.7744 2.66805 15.3215 2.72007C15.8537 2.77067 16.1262 2.86235 16.3184 2.98013L17.3634 1.27485C16.8042 0.932136 16.1895 0.793567 15.5108 0.729045C14.8471 0.665937 14.0242 0.666992 13.0206 0.666992V2.66699ZM19.3331 6.97951C19.3331 5.97593 19.3342 5.15301 19.2711 4.48929C19.2066 3.81068 19.068 3.19596 18.7253 2.63669L17.02 3.68169C17.1378 3.87389 17.2295 4.14638 17.2801 4.67859C17.3321 5.22569 17.3331 5.9372 17.3331 6.97951H19.3331ZM16.3184 2.98013C16.6044 3.15535 16.8448 3.39576 17.02 3.68169L18.7253 2.63669C18.3851 2.08165 17.9185 1.61499 17.3634 1.27485L16.3184 2.98013ZM11.1456 0.666992C10.142 0.666992 9.31913 0.665937 8.65541 0.729045C7.9768 0.793567 7.36208 0.932136 6.80282 1.27485L7.84782 2.98013C8.04002 2.86235 8.31251 2.77067 8.84472 2.72007C9.39181 2.66805 10.1033 2.66699 11.1456 2.66699V0.666992ZM6.80282 1.27485C6.24778 1.61499 5.78111 2.08165 5.44098 2.63669L7.14627 3.68169C7.32149 3.39576 7.56189 3.15535 7.84782 2.98013L6.80282 1.27485ZM6.85949 5.05227C6.90029 4.26783 7.001 3.91874 7.14627 3.68169L5.44098 2.63669C5.02617 3.31361 4.9074 4.07928 4.86219 4.94838L6.85949 5.05227ZM15.0331 13.2791C15.6814 13.2576 16.2526 13.1993 16.7867 12.978L16.0213 11.1303C15.8348 11.2075 15.5645 11.2604 14.9666 11.2802L15.0331 13.2791Z"
                                            fill="#252525"
                                        />
                                        <path
                                            d="M5.42432 10.833H5.43182M8.33325 10.833H8.34075M11.2424 10.833H11.2499"
                                            stroke="#252525"
                                            strokeWidth={2}
                                            strokeLinecap="round"
                                            strokeLinejoin="round"
                                        />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_2988_8977">
                                            <rect width={20} height={20} fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>
                            </a>
                        </div>

                    </div>
                </div>
            </div>
            <div className={isMobileView ? "col-12 my-2" : "col-7 my-2 mx-2"}>
                <div
                    className="card personal_details"
                    style={{ height: "fit-content" }}
                >
                    <div className="card-body">
                        <div>
                            <Button
                                style={{
                                    borderBottom: active === "Details" ? "2px solid #006875" : "",
                                    color: active === "Details" ? "#006875" : "black",
                                    textTransform: "capitalize",
                                }}
                                onClick={() => setActive("Details")}
                            >
                                Details
                            </Button>
                        </div>

                        <button
                            onClick={() => setOpen(true)}
                            className="btn  mt-4 px-2 py-2"
                            style={{ backgroundColor: "#187AF7", color: "white" }}
                        >
                            Change Password &nbsp;
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 20 20"
                                fill="none"
                            >
                                <path
                                    d="M13.1253 1.6665C13.1253 1.32133 12.8455 1.0415 12.5003 1.0415C12.1551 1.0415 11.8753 1.32133 11.8753 1.6665V18.3332C11.8753 18.6784 12.1551 18.9582 12.5003 18.9582C12.8455 18.9582 13.1253 18.6784 13.1253 18.3332V16.6618C15.3219 16.6388 16.5454 16.5021 17.3573 15.6902C18.3337 14.7139 18.3337 13.1425 18.3337 9.99984C18.3337 6.85714 18.3337 5.28579 17.3573 4.30948C16.5454 3.49754 15.3219 3.36084 13.1253 3.33783V1.6665Z"
                                    fill="white"
                                />
                                <path
                                    fill-rule="evenodd"
                                    clip-rule="evenodd"
                                    d="M2.6433 15.6902C3.61961 16.6665 5.19096 16.6665 8.33366 16.6665H10.8337V9.99984V3.33317H8.33366C5.19096 3.33317 3.61961 3.33317 2.6433 4.30948C1.66699 5.28579 1.66699 6.85714 1.66699 9.99984C1.66699 13.1425 1.66699 14.7139 2.6433 15.6902ZM10.8337 9.99984C10.8337 9.5396 10.4606 9.1665 10.0003 9.1665C9.54009 9.1665 9.16699 9.5396 9.16699 9.99984C9.16699 10.4601 9.54009 10.8332 10.0003 10.8332C10.4606 10.8332 10.8337 10.4601 10.8337 9.99984ZM7.50033 9.99984C7.50033 10.4601 7.12723 10.8332 6.66699 10.8332C6.20676 10.8332 5.83366 10.4601 5.83366 9.99984C5.83366 9.5396 6.20676 9.1665 6.66699 9.1665C7.12723 9.1665 7.50033 9.5396 7.50033 9.99984Z"
                                    fill="white"
                                />
                            </svg>
                        </button>

                        <div style={{backgroundColor:"#F8F8F8"}}>
                            <div className="mx-2 my-3" style={{padding:"2px"}}>
                            <p className="mt-4" style={{ fontWeight: 550 }}>Personal Details</p>
                            <div className="d-flex">
                                <div style={{ width: "33%" }}>
                                    <p>First Name</p>
                                    <p style={{ fontWeight: 550 }}>{data?.first_name}</p>
                                </div>
                                <div style={{ width: "33%" }}>
                                    <p>Last Name</p>
                                    <p style={{ fontWeight: 550 }}>{data?.last_name}</p>
                                </div>
                                <div style={{ width: "33%" }}>
                                    <p>Phone</p>
                                    <p style={{ fontWeight: 550 }}>{data.mobile}</p>
                                </div>

                            </div>
                            <div className="d-flex">
                                <div style={{ width: "33%" }}>
                                    <p>Email</p>
                                    <p style={{ fontWeight: 550 }}>{data?.email}</p>
                                </div>
                                <div style={{ width: "33%" }}>
                                    <p>Location</p>
                                    <p style={{ fontWeight: 550 }}>{data?.location}</p>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ChangePasword open={open} setOpen={setOpen}/>
        </div>}
    </>
                            
    );
}

export default ProfileCardDetails;
